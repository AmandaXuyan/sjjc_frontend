{"remainingRequest":"/Users/amanda/sjjc_frontend/node_modules/babel-loader/lib/index.js!/Users/amanda/sjjc_frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/amanda/sjjc_frontend/src/utils/request.js","dependencies":[{"path":"/Users/amanda/sjjc_frontend/src/utils/request.js","mtime":1616124537544},{"path":"/Users/amanda/sjjc_frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/amanda/sjjc_frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/amanda/sjjc_frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2FtYW5kYS9zampjX2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS1jb3JlanMyL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgVnVlQXhpb3MgfSBmcm9tICIuL2F4aW9zIjsKaW1wb3J0IHsgbm90aWZpY2F0aW9uLCBtZXNzYWdlIH0gZnJvbSAnYW50LWRlc2lnbi12dWUnOyAvLyDliJvlu7ogYXhpb3Mg5a6e5L6LCgp2YXIgc2VydmljZSA9IGF4aW9zLmNyZWF0ZSh7CiAgYmFzZVVSTDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICcnIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MScsCiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCn0pOwpjb25zb2xlLmxvZyhwcm9jZXNzLmVudi5OT0RFX0VOVik7Cgp2YXIgZXJyID0gZnVuY3Rpb24gZXJyKGVycm9yKSB7CiAgaWYgKGVycm9yLnJlc3BvbnNlKSB7CiAgICB2YXIgZGF0YSA9IGVycm9yLnJlc3BvbnNlLmRhdGE7CiAgICB2YXIgdG9rZW4gPSBWdWUubHMuZ2V0KCdBQ0NFU1NfVE9LRU4nKTsKCiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDMpIHsKICAgICAgbm90aWZpY2F0aW9uLmVycm9yKHsKICAgICAgICBtZXNzYWdlOiAnRm9yYmlkZGVuJywKICAgICAgICBkZXNjcmlwdGlvbjogZGF0YS5tZXNzYWdlCiAgICAgIH0pOwogICAgfQoKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSAmJiAhKGRhdGEucmVzdWx0ICYmIGRhdGEucmVzdWx0LmlzTG9naW4pKSB7CiAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcsCiAgICAgICAgZGVzY3JpcHRpb246ICdBdXRob3JpemF0aW9uIHZlcmlmaWNhdGlvbiBmYWlsZWQnCiAgICAgIH0pOwoKICAgICAgaWYgKHRva2VuKSB7Ly8gc3RvcmUuZGlzcGF0Y2goJ0xvZ291dCcpLnRoZW4oKCkgPT4gewogICAgICAgIC8vICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKQogICAgICAgIC8vICAgfSwgMTUwMCkKICAgICAgICAvLyB9KQogICAgICB9CiAgICB9CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9OyAvL3JlcXVlc3QgaW5jZXJjZXB0b3IKCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgdmFyIHJlcXVlc3RDb25maWcgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGNvbmZpZyksIHt9LCB7CiAgICB1cmw6ICIiLmNvbmNhdChjb25maWcudXJsKQogIH0pOwoKICByZXR1cm4gcmVxdWVzdENvbmZpZzsKfSwgZXJyKTsKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7CiAgICBjYXNlIDIwMDoKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcyAmJiByZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YS5jb250ZW50OwogICAgICB9CgogICAgICBtZXNzYWdlLmVycm9yKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgNDA0OgogICAgICByZXR1cm4gZmFsc2U7CgogICAgZGVmYXVsdDoKICAgICAgbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogIH0KfSk7CnZhciBpbnN0YWxsZXIgPSB7CiAgdm06IHt9LAogIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7CiAgICBWdWUudXNlKFZ1ZUF4aW9zLCBzZXJ2aWNlKTsKICB9Cn07CmV4cG9ydCB7IGluc3RhbGxlciBhcyBWdWVBeGlvcywgc2VydmljZSBhcyBheGlvcyB9Ow=="},{"version":3,"sources":["/Users/amanda/sjjc_frontend/src/utils/request.js"],"names":["Vue","axios","VueAxios","notification","message","service","create","baseURL","process","env","NODE_ENV","withCredentials","console","log","err","error","response","data","token","ls","get","status","description","result","isLogin","Promise","reject","interceptors","request","use","config","requestConfig","url","success","content","installer","vm","install"],"mappings":";;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT;AACA,SAAQC,YAAR,EAAsBC,OAAtB,QAAoC,gBAApC,C,CAEA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,EAAxC,GAA4C,uBAD1B;AAE3BC,EAAAA,eAAe,EAAE;AAFU,CAAb,CAAhB;AAIAC,OAAO,CAACC,GAAR,CAAYL,OAAO,CAACC,GAAR,CAAYC,QAAxB;;AACA,IAAMI,GAAG,GAAG,SAANA,GAAM,CAACC,KAAD,EAAW;AACrB,MAAIA,KAAK,CAACC,QAAV,EAAoB;AAClB,QAAMC,IAAI,GAAGF,KAAK,CAACC,QAAN,CAAeC,IAA5B;AACA,QAAMC,KAAK,GAAGlB,GAAG,CAACmB,EAAJ,CAAOC,GAAP,CAAW,cAAX,CAAd;;AACA,QAAIL,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AACjClB,MAAAA,YAAY,CAACY,KAAb,CAAmB;AACjBX,QAAAA,OAAO,EAAE,WADQ;AAEjBkB,QAAAA,WAAW,EAAEL,IAAI,CAACb;AAFD,OAAnB;AAID;;AACD,QAAIW,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA1B,IAAiC,EAAEJ,IAAI,CAACM,MAAL,IAAeN,IAAI,CAACM,MAAL,CAAYC,OAA7B,CAArC,EAA4E;AAC1ErB,MAAAA,YAAY,CAACY,KAAb,CAAmB;AACjBX,QAAAA,OAAO,EAAE,cADQ;AAEjBkB,QAAAA,WAAW,EAAE;AAFI,OAAnB;;AAIA,UAAIJ,KAAJ,EAAW,CACT;AACA;AACA;AACA;AACA;AACD;AACF;AACF;;AACD,SAAOO,OAAO,CAACC,MAAR,CAAeX,KAAf,CAAP;AACD,CAzBD,C,CA2BA;;;AACAV,OAAO,CAACsB,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAACC,MAAD,EAAY;AAC3C,MAAMC,aAAa,mCACdD,MADc;AAEjBE,IAAAA,GAAG,YAAKF,MAAM,CAACE,GAAZ;AAFc,IAAnB;;AAIA,SAAOD,aAAP;AACD,CAND,EAMGjB,GANH;AAQAT,OAAO,CAACsB,YAAR,CAAqBX,QAArB,CAA8Ba,GAA9B,CAAkC,UAACb,QAAD,EAAc;AAC9C,UAAQA,QAAQ,CAACK,MAAjB;AACE,SAAK,GAAL;AACE,UAAGL,QAAQ,CAACC,IAAT,CAAcgB,OAAd,IAAyBjB,QAAQ,CAACC,IAAT,CAAcgB,OAA1C,EAAkD;AAChD,eAAOjB,QAAQ,CAACC,IAAT,CAAciB,OAArB;AACD;;AACD9B,MAAAA,OAAO,CAACW,KAAR,CAAcC,QAAQ,CAACC,IAAT,CAAcb,OAA5B;AACA;;AACF,SAAK,GAAL;AACE,aAAO,KAAP;;AACF;AACEA,MAAAA,OAAO,CAACW,KAAR,CAAcC,QAAQ,CAACC,IAAT,CAAcb,OAA5B;AAVJ;AAYD,CAbD;AAeA,IAAM+B,SAAS,GAAG;AAChBC,EAAAA,EAAE,EAAE,EADY;AAEhBC,EAAAA,OAFgB,mBAEPrC,GAFO,EAEF;AACZA,IAAAA,GAAG,CAAC6B,GAAJ,CAAQ3B,QAAR,EAAkBG,OAAlB;AACD;AAJe,CAAlB;AAOA,SACE8B,SAAS,IAAIjC,QADf,EAEEG,OAAO,IAAIJ,KAFb","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport { VueAxios } from './axios'\nimport {notification, message} from 'ant-design-vue'\n\n// 创建 axios 实例\nconst service = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' ? '': 'http://localhost:8081',\n  withCredentials: true\n})\nconsole.log(process.env.NODE_ENV)\nconst err = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    const token = Vue.ls.get('ACCESS_TOKEN')\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n      })\n      if (token) {\n        // store.dispatch('Logout').then(() => {\n        //   setTimeout(() => {\n        //     window.location.reload()\n        //   }, 1500)\n        // })\n      }\n    }\n  }\n  return Promise.reject(error)\n}\n\n//request incerceptor\nservice.interceptors.request.use((config) => {\n  const requestConfig = {\n    ...config,\n    url: `${config.url}`,\n  }\n  return requestConfig\n}, err)\n\nservice.interceptors.response.use((response) => {\n  switch (response.status) {\n    case 200:\n      if(response.data.success && response.data.success){\n        return response.data.content\n      }\n      message.error(response.data.message)\n      break\n    case 404:\n      return false\n    default:\n      message.error(response.data.message)\n  }\n})\n\nconst installer = {\n  vm: {},\n  install (Vue) {\n    Vue.use(VueAxios, service)\n  }\n}\n\nexport {\n  installer as VueAxios,\n  service as axios\n}\n"]}]}