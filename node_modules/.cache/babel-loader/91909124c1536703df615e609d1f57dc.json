{"remainingRequest":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/node_modules/babel-loader/lib/index.js!/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/node_modules/eslint-loader/index.js??ref--13-0!/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/src/utils/request.js","dependencies":[{"path":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/src/utils/request.js","mtime":1616124537544},{"path":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/.babelrc","mtime":1601447864000},{"path":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXM3Lm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS5pdGVyYWJsZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzNi5vYmplY3Qua2V5cyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2FtYW5kYS9Eb3dubG9hZHMvbmp1XHU1OTI3XHU0RTA5XHU0RTBCL1x1OEY2Rlx1NURFNVx1NEUwOS9cdTU5MjdcdTRGNUNcdTRFMUFcdTk4NzlcdTc2RUUvc29mdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUtY29yZWpzMi9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IFZ1ZUF4aW9zIH0gZnJvbSAiLi9heGlvcyI7CmltcG9ydCB7IG5vdGlmaWNhdGlvbiwgbWVzc2FnZSB9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsgLy8g5Yib5bu6IGF4aW9zIOWunuS+iwoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnJyA6ICdodHRwOi8vbG9jYWxob3N0OjgwODEnLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZQp9KTsKY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuTk9ERV9FTlYpOwoKdmFyIGVyciA9IGZ1bmN0aW9uIGVycihlcnJvcikgewogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgdmFyIGRhdGEgPSBlcnJvci5yZXNwb25zZS5kYXRhOwogICAgdmFyIHRva2VuID0gVnVlLmxzLmdldCgnQUNDRVNTX1RPS0VOJyk7CgogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgIG5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgICAgbWVzc2FnZTogJ0ZvcmJpZGRlbicsCiAgICAgICAgZGVzY3JpcHRpb246IGRhdGEubWVzc2FnZQogICAgICB9KTsKICAgIH0KCiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgJiYgIShkYXRhLnJlc3VsdCAmJiBkYXRhLnJlc3VsdC5pc0xvZ2luKSkgewogICAgICBub3RpZmljYXRpb24uZXJyb3IoewogICAgICAgIG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnQXV0aG9yaXphdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkJwogICAgICB9KTsKCiAgICAgIGlmICh0b2tlbikgey8vIHN0b3JlLmRpc3BhdGNoKCdMb2dvdXQnKS50aGVuKCgpID0+IHsKICAgICAgICAvLyAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIC8vICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgICAvLyAgIH0sIDE1MDApCiAgICAgICAgLy8gfSkKICAgICAgfQogICAgfQogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfTsgLy9yZXF1ZXN0IGluY2VyY2VwdG9yCgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIHZhciByZXF1ZXN0Q29uZmlnID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBjb25maWcpLCB7fSwgewogICAgdXJsOiAiIi5jb25jYXQoY29uZmlnLnVybCkKICB9KTsKCiAgcmV0dXJuIHJlcXVlc3RDb25maWc7Cn0sIGVycik7CnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykgewogICAgY2FzZSAyMDA6CiAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEuY29udGVudDsKICAgICAgfQoKICAgICAgbWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICBicmVhazsKCiAgICBjYXNlIDQwNDoKICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIGRlZmF1bHQ6CiAgICAgIG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICB9Cn0pOwp2YXIgaW5zdGFsbGVyID0gewogIHZtOiB7fSwKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgVnVlLnVzZShWdWVBeGlvcywgc2VydmljZSk7CiAgfQp9OwpleHBvcnQgeyBpbnN0YWxsZXIgYXMgVnVlQXhpb3MsIHNlcnZpY2UgYXMgYXhpb3MgfTs="},{"version":3,"sources":["/Users/amanda/Downloads/nju大三下/软工三/大作业项目/soft/src/utils/request.js"],"names":["Vue","axios","VueAxios","notification","message","service","create","baseURL","process","env","NODE_ENV","withCredentials","console","log","err","error","response","data","token","ls","get","status","description","result","isLogin","Promise","reject","interceptors","request","use","config","requestConfig","url","success","content","installer","vm","install"],"mappings":";;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT;AACA,SAAQC,YAAR,EAAsBC,OAAtB,QAAoC,gBAApC,C,CAEA;;AACA,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,EAAxC,GAA4C,uBAD1B;AAE3BC,EAAAA,eAAe,EAAE;AAFU,CAAb,CAAhB;AAIAC,OAAO,CAACC,GAAR,CAAYL,OAAO,CAACC,GAAR,CAAYC,QAAxB;;AACA,IAAMI,GAAG,GAAG,SAANA,GAAM,CAACC,KAAD,EAAW;AACrB,MAAIA,KAAK,CAACC,QAAV,EAAoB;AAClB,QAAMC,IAAI,GAAGF,KAAK,CAACC,QAAN,CAAeC,IAA5B;AACA,QAAMC,KAAK,GAAGlB,GAAG,CAACmB,EAAJ,CAAOC,GAAP,CAAW,cAAX,CAAd;;AACA,QAAIL,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AACjClB,MAAAA,YAAY,CAACY,KAAb,CAAmB;AACjBX,QAAAA,OAAO,EAAE,WADQ;AAEjBkB,QAAAA,WAAW,EAAEL,IAAI,CAACb;AAFD,OAAnB;AAID;;AACD,QAAIW,KAAK,CAACC,QAAN,CAAeK,MAAf,KAA0B,GAA1B,IAAiC,EAAEJ,IAAI,CAACM,MAAL,IAAeN,IAAI,CAACM,MAAL,CAAYC,OAA7B,CAArC,EAA4E;AAC1ErB,MAAAA,YAAY,CAACY,KAAb,CAAmB;AACjBX,QAAAA,OAAO,EAAE,cADQ;AAEjBkB,QAAAA,WAAW,EAAE;AAFI,OAAnB;;AAIA,UAAIJ,KAAJ,EAAW,CACT;AACA;AACA;AACA;AACA;AACD;AACF;AACF;;AACD,SAAOO,OAAO,CAACC,MAAR,CAAeX,KAAf,CAAP;AACD,CAzBD,C,CA2BA;;;AACAV,OAAO,CAACsB,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAACC,MAAD,EAAY;AAC3C,MAAMC,aAAa,mCACdD,MADc;AAEjBE,IAAAA,GAAG,YAAKF,MAAM,CAACE,GAAZ;AAFc,IAAnB;;AAIA,SAAOD,aAAP;AACD,CAND,EAMGjB,GANH;AAQAT,OAAO,CAACsB,YAAR,CAAqBX,QAArB,CAA8Ba,GAA9B,CAAkC,UAACb,QAAD,EAAc;AAC9C,UAAQA,QAAQ,CAACK,MAAjB;AACE,SAAK,GAAL;AACE,UAAGL,QAAQ,CAACC,IAAT,CAAcgB,OAAd,IAAyBjB,QAAQ,CAACC,IAAT,CAAcgB,OAA1C,EAAkD;AAChD,eAAOjB,QAAQ,CAACC,IAAT,CAAciB,OAArB;AACD;;AACD9B,MAAAA,OAAO,CAACW,KAAR,CAAcC,QAAQ,CAACC,IAAT,CAAcb,OAA5B;AACA;;AACF,SAAK,GAAL;AACE,aAAO,KAAP;;AACF;AACEA,MAAAA,OAAO,CAACW,KAAR,CAAcC,QAAQ,CAACC,IAAT,CAAcb,OAA5B;AAVJ;AAYD,CAbD;AAeA,IAAM+B,SAAS,GAAG;AAChBC,EAAAA,EAAE,EAAE,EADY;AAEhBC,EAAAA,OAFgB,mBAEPrC,GAFO,EAEF;AACZA,IAAAA,GAAG,CAAC6B,GAAJ,CAAQ3B,QAAR,EAAkBG,OAAlB;AACD;AAJe,CAAlB;AAOA,SACE8B,SAAS,IAAIjC,QADf,EAEEG,OAAO,IAAIJ,KAFb","sourcesContent":["import Vue from 'vue'\nimport axios from 'axios'\nimport { VueAxios } from './axios'\nimport {notification, message} from 'ant-design-vue'\n\n// 创建 axios 实例\nconst service = axios.create({\n  baseURL: process.env.NODE_ENV === 'production' ? '': 'http://localhost:8081',\n  withCredentials: true\n})\nconsole.log(process.env.NODE_ENV)\nconst err = (error) => {\n  if (error.response) {\n    const data = error.response.data\n    const token = Vue.ls.get('ACCESS_TOKEN')\n    if (error.response.status === 403) {\n      notification.error({\n        message: 'Forbidden',\n        description: data.message\n      })\n    }\n    if (error.response.status === 401 && !(data.result && data.result.isLogin)) {\n      notification.error({\n        message: 'Unauthorized',\n        description: 'Authorization verification failed'\n      })\n      if (token) {\n        // store.dispatch('Logout').then(() => {\n        //   setTimeout(() => {\n        //     window.location.reload()\n        //   }, 1500)\n        // })\n      }\n    }\n  }\n  return Promise.reject(error)\n}\n\n//request incerceptor\nservice.interceptors.request.use((config) => {\n  const requestConfig = {\n    ...config,\n    url: `${config.url}`,\n  }\n  return requestConfig\n}, err)\n\nservice.interceptors.response.use((response) => {\n  switch (response.status) {\n    case 200:\n      if(response.data.success && response.data.success){\n        return response.data.content\n      }\n      message.error(response.data.message)\n      break\n    case 404:\n      return false\n    default:\n      message.error(response.data.message)\n  }\n})\n\nconst installer = {\n  vm: {},\n  install (Vue) {\n    Vue.use(VueAxios, service)\n  }\n}\n\nexport {\n  installer as VueAxios,\n  service as axios\n}\n"]}]}